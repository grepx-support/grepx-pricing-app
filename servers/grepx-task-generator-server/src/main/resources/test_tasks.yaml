# Test Tasks Configuration
# Simple tasks for testing and verification

celery_tasks:
  # Simple Hello World Task
  - name: test.hello_world
    module_path: business-tasks.tasks.test_task
    function_name: hello_world
    description: Simple hello world test task
    tags: [test, demo, simple]
    options:
      bind: false
    retry_policy:
      max_retries: 2
      interval_start: 0
      interval_step: 0.2
    timeout: 60
    is_active: true

  # Simple Calculation Task
  - name: test.calculate_sum
    module_path: business-tasks.tasks.test_task
    function_name: calculate_sum
    description: Calculate sum of numbers
    tags: [test, calculation]
    options:
      bind: false
    retry_policy:
      max_retries: 2
      interval_start: 0
      interval_step: 0.2
    timeout: 60
    is_active: true

dagster_assets:
  # Hello World Asset
  - name: test_hello_world
    celery_task_name: test.hello_world
    description: Test hello world task execution
    group_name: test
    tags: [test, demo]
    task_args:
      - name: "Celery Worker"
    task_kwargs:
      message: "Hello from Dagster!"
      store_output: true
    is_active: true

  # Calculate Sum Asset
  - name: test_calculate_sum
    celery_task_name: test.calculate_sum
    description: Test calculation task execution
    group_name: test
    tags: [test, calculation]
    task_args: []
    task_kwargs:
      numbers: [1, 2, 3, 4, 5, 10, 20, 30]
    is_active: true

dagster_resources:
  - name: test_task_client
    resource_type: TaskClient
    description: Task client for test tasks
    config:
      broker_url: "${CELERY_BROKER_URL}"
      backend_url: "${CELERY_RESULT_BACKEND}"
      task_timeout: 60
    is_active: true

dagster_schedules:
  # Run hello world every 5 minutes for testing
  - name: test_hello_world_schedule
    asset_selection: [test_hello_world]
    cron_schedule: "*/5 * * * *"  # Every 5 minutes
    description: Test hello world schedule
    is_active: false  # Disabled by default

dagster_sensors:
  # Example sensor (disabled by default)
  - name: test_hello_world_sensor
    asset_selection: [test_hello_world]
    sensor_type: IntervalSensor
    config:
      interval_seconds: 300  # Every 5 minutes
    description: Test hello world sensor
    is_active: false

